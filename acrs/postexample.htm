<html><head><title>FAQTs - Knowledge Base - View Entry - Using PHP, how do I send a http POST without using a form?</title>

<link href="postexample_files/faq.css" rel="stylesheet" type="text/css">
<script language="JavaScript" src="postexample_files/faqts.js" type="text/javascript"></script>
<script>document.write('<link href="/faqts-css/faqts.js.css" rel="stylesheet"  />')</script><link href="postexample_files/faqts.css" rel="stylesheet"></head><body>


<table border="0" cellpadding="0" cellspacing="0" width="100%">
	<tbody><tr>
	<td align="left" valign="middle">
		<a href="http://www.faqts.com/index.phtml"><img src="postexample_files/php-faqts.gif" border="0"></a></td>
		
		<td class="topmenu">

<!-- 		<a href="http://www.faqts.com">Home</a>&nbsp;&nbsp;
		<a href="../../member/index.phtml">My Faqts</a>&nbsp;&nbsp;
		<a href="../../knowledge_base/contributors.phtml">Contributors</a>&nbsp;&nbsp;
		<a href="../../about/index.phtml">About</a>&nbsp;&nbsp;
		<a href="../../help/index.phtml">Help</a>&nbsp;&nbsp;
		<a href="../../about/index.phtml#link">Link to FAQTS</a>&nbsp;&nbsp;
 -->
		</td>
	</tr>
</tbody></table>

<table border="0" cellpadding="0" cellspacing="0" height="6" width="100%">
 <tbody><tr>
  <td>
	<table border="0" cellpadding="0" cellspacing="0" height="100%" width="100%">
 <tbody><tr><td nowrap="nowrap"><div id="header"><ul><li><a href="http://www.faqts.com/">Home</a></li>
          <li><a href="http://www.faqts.com/member/index.phtml">My Faqts</a>	        </li>
          <li><a href="http://www.faqts.com/knowledge_base/contributors.phtml">Contributors</a></li>
          <li><a href="http://www.faqts.com/about/index.phtml">About</a></li>
          <li><a href="http://www.faqts.com/help/index.phtml">Help</a></li>
      </ul>
      
	<!-- <hr> -->
	
	</div></td>
   </tr>
    </tbody></table></td></tr></tbody></table>
	<div class="boxcontainer">


<div id="dhtmltooltip"></div>
<script language="JavaScript" src="postexample_files/tooltip.js" type="text/javascript"></script>

<div id="leaderboard_ad">
	<div>
				
	</div>
</div>
			<h2 class="fnav">
				<a href="http://www.faqts.com/knowledge_base/index.phtml/fid/1">faqts</a> : <a href="http://www.faqts.com/knowledge_base/index.phtml/fid/131">Computers</a> : <a href="http://www.faqts.com/knowledge_base/index.phtml/fid/135">Programming</a> : <a href="http://www.faqts.com/knowledge_base/index.phtml/fid/138">Languages</a> : PHP			</h2>

<table class="searchhead" border="0" cellpadding="0" cellspacing="0" width="100%">
    <tbody><tr>
		<td onclick="toggleDisplay('searchpop'); return false;" onmouseover="ddrivetip('Click Here to Search Faqts.com')" ;="" onmouseout="hideddrivetip()"><h5>+ Search</h5></td>
		<td align="right">
					<a href="http://www.faqts.com/email_alert/edit/add.phtml?type=EntryEdited&amp;instance=12039&amp;return_url=%2Fknowledge_base%2Fview.phtml%2Faid%2F12039"><img src="postexample_files/folder_alert_add.gif" alt="Add Entry Alert" onmouseover="ddrivetip('Add Entry Alert')" onmouseout="hideddrivetip()"></a><a href="http://www.faqts.com/knowledge_base/folder/index.phtml?fid=51&amp;folder_url=%2Fknowledge_base%2Findex.phtml%2Ffid%2F&amp;class_name=ss_knowledge_base_folder&amp;module_name=Knowledge+Base&amp;return_url=%2Fknowledge_base%2Fview.phtml%2Faid%2F12039&amp;security="><img src="postexample_files/manage_folder.gif" alt="Manage Folder" onmouseover="ddrivetip('Manage Folder')" ;="" onmouseout="hideddrivetip()"></a>
								
					<a href="http://www.faqts.com/knowledge_base/entry/edit/index.phtml?aid=12039&amp;fid=51&amp;return_url=%2Fknowledge_base%2Fview.phtml%2Faid%2F12039"><img src="postexample_files/pencil.gif" alt="Edit Entry" onmouseover="ddrivetip('Edit Entry')" ;="" onmouseout="hideddrivetip()"></a>					
<a href="http://del.icio.us/post?title=Knowledge%20Base%20-%20faqts%20:%20Computers%20:%20Programming%20:%20Languages%20:%20PHP&amp;url=http://www.faqts.com/knowledge_base/view.phtml/aid/12039/fid/51"><img src="postexample_files/delicious.gif" alt="Add page to http://del.icio.us/" onmouseover="ddrivetip('Add this page to http://del.icio.us/')" ;="" onmouseout="hideddrivetip()"></a>
		</td>
	</tr>
</tbody></table>

<div class="mainFolders">
	<table align="center" cellpadding="4" cellspacing="0">
		<tbody><tr>
			<td>
				<div id="searchpop" style="display: none;">
						<center>
				<form method="get" action="/knowledge_base/search/index.phtml">
					<input name="fid" value="51" type="hidden">
						

<select name="selected_old_search" size="1"><option value="My Recent Searches">My Recent Searches</option></select>					<input name="search" size="30" value="" type="text">
					<input value="Search" type="submit">
						<select name="fid">
							<option value="1">All of FAQTs							</option><option value="51" selected="selected">PHP Knowledge Base
							</option><option value="51">PHP Folder
						</option></select></form></center>


				</div>
			</td>
		</tr>
		</tbody></table><table>
		<tbody><tr align="left">
			<td>
			
Did You Find This Entry Useful?<br><strong>Yes</strong>
<p>
<strong>681</strong> of <strong>762</strong> people (89%) answered Yes<br>Recently <strong>9</strong> of <strong>10</strong> people (90%) answered Yes<br>
			</p></td>
		</tr>
		</tbody></table>
		<div id="viewlinks">
<a href="http://www.phpbuilder.com/">phpbuilder.com</a>,&nbsp;<a href="http://www.ratemyhost.com/">Best web hosting</a>,&nbsp;<a href="http://directory.google.com/Top/Computers/Programming/Languages/PHP">PHP: overview: directory: Google</a>,&nbsp;<a href="http://www.cheaphostingdirectory.com/">hosting</a>,&nbsp;<a href="http://www.powweb.com/">Affordable Budget Web Hosting</a>,&nbsp;<a href="http://www.webmaster911.com/">webmaster resources</a>,&nbsp;<a href="http://www.webmastersales.com/">webmaster forum</a>,&nbsp;<a href="http://www.faqts.com/">FAQTs</a>,&nbsp;<a href="http://www.expanse.com/">Expanse - CMS For The Artists, By the Artist.</a>,&nbsp;			</div>
			
		
	
<b class="rbottom"><b class="r4"></b><b class="r3"></b><b class="r2"></b><b class="r1"></b></b></div>

<div id="questions"><h3>Entry</h3>



    

    <h5>Using PHP, how do I send a http POST without using a form?</h5><h5>How can I add a file to the $data? As in a form containg an &lt;input type=file&gt;</h5>
    <p>
    <small>
    Jul 7th, 2003 14:18<br><a href="http://www.faqts.com/knowledge_base/community/index.phtml/id/15838">Gerhardt</a>, <a href="http://www.faqts.com/knowledge_base/community/index.phtml/id/1800">Philip Olson</a>, <a href="http://www.faqts.com/knowledge_base/community/index.phtml/id/8317">Knud van Eeden</a>, <a href="http://www.faqts.com/knowledge_base/community/index.phtml/id/8668">Daniel Dickey</a>, <a href="http://www.faqts.com/knowledge_base/community/index.phtml/id/19078">bob everett</a>, <a href="http://www.faqts.com/knowledge_base/community/index.phtml/id/11714">Mark Wright</a>, Matt McClanahan<br>    </small>

    </p><p>
    <br>

</p><pre nd="1">There are a few functions floating around out there but essentially it 
comes down to using fsockopen().  User functions posttohost() and 
sendtohost() exist, here's the sendtohost() code which can be also 
seen at:

  <a href="http://dodds.net/%7Ecardinal/sendtohost.txt">http://dodds.net/~cardinal/sendtohost.txt</a>

Note that the above <a itxtdid="2659361" target="_blank" href="#" style="border-bottom: 0.075em solid darkgreen; font-weight: normal; font-size: 100%; text-decoration: underline; color: darkgreen; background-color: transparent; padding-bottom: 1px;" class="iAs">URL</a> contains some errors. All HTTP headers must 
end with \r\n. Most <a itxtdid="2858784" target="_blank" href="#" style="border-bottom: 0.075em solid darkgreen; font-weight: normal; font-size: 100%; text-decoration: underline; color: darkgreen; background-color: transparent; padding-bottom: 1px;" class="iAs">webservers</a> will accept just the linefeed 
character, but you should always follow the standard if possible

More info available at: <a href="http://www.faqs.org/rfcs/rfc2616.html">http://www.faqs.org/rfcs/rfc2616.html</a>

Here's a slightly modified version of sendtohost():

/* sendToHost
 * ~~~~~~~~~~
 * Params:
 *   $<a itxtdid="2646498" target="_blank" href="#" style="border-bottom: 0.075em solid darkgreen; font-weight: normal; font-size: 100%; text-decoration: underline; color: darkgreen; background-color: transparent; padding-bottom: 1px;" class="iAs">host</a>      - Just the hostname.  No http:// or 
                  /path/to/file.html portions
 *   $method    - get or post, case-insensitive
 *   $path      - The /path/to/file.html part
 *   $<a itxtdid="2625497" target="_blank" href="#" style="border-bottom: 0.075em solid darkgreen; font-weight: normal; font-size: 100%; text-decoration: underline; color: darkgreen; background-color: transparent; padding-bottom: 1px;" class="iAs">data</a>      - The <a itxtdid="2856660" target="_blank" href="#" style="border-bottom: 0.075em solid darkgreen; font-weight: normal; font-size: 100%; text-decoration: underline; color: darkgreen; background-color: transparent; padding-bottom: 1px;" class="iAs">query</a> string, without initial question mark
 *   $useragent - If true, 'MSIE' will be sent as 
                  the User-Agent (optional)
 *
 * Examples:
 *   sendToHost('www.google.com','get','/search','q=php_imlib');
 *   sendToHost('www.example.com','post','/some_script.cgi',
 *              'param=First+Param&amp;second=Second+param');
 */

function sendToHost($host,$method,$path,$data,$useragent=0)
{
    // Supply a default method of GET if the one passed was empty
    if (empty($method)) {
        $method = 'GET';
    }
    $method = strtoupper($method);
    $fp = fsockopen($host, 80);
    if ($method == 'GET') {
        $path .= '?' . $data;
    }
    fputs($fp, "$method $path HTTP/1.1\r\n");
    fputs($fp, "Host: $host\r\n");
    fputs($fp,"Content-type: application/x-www-form- urlencoded\r\n");
    fputs($fp, "Content-length: " . strlen($data) . "\r\n");
    if ($useragent) {
        fputs($fp, "User-Agent: MSIE\r\n");
    }
    fputs($fp, "Connection: close\r\n\r\n");
    if ($method == 'POST') {
        fputs($fp, $data);
    }

    while (!feof($fp)) {
        $buf .= fgets($fp,128);
    }
    fclose($fp);
    return $buf;
}

And for good measure:
  <a href="http://www.php.net/fsockopen">http://www.php.net/fsockopen</a>

Related tutorials/scripts:
  <a href="http://snoopy.sourceforge.net/">http://snoopy.sourceforge.net/</a>
  <a href="http://www.zend.com/zend/spotlight/mimocsumissions.php">http://www.zend.com/zend/spotlight/mimocsumissions.php</a>

Keywords/typos: posttohost post2host post_to_host senttohost send2host</pre>

    </div>

</div>
<div id="adbottom">
<table class="bottomtable" align="center" cellpadding="0" cellspacing="0" width="100%">
      <tbody><tr bordercolor="#666666" class="bottomlink" bgcolor="#ffffff">
        <td align="right">&nbsp;</td>
      </tr>
    </tbody></table>

</div>

<!-- start Vibrant Media IntelliTXT script section -->

<script type="text/javascript" src="postexample_files/front.js"></script><script language="javascript" src="postexample_files/door.js"></script>
<!-- end Vibrant Media IntelliTXT script section -->
<script type="text/javascript" src="postexample_files/func_033.js"></script><script type="text/javascript" src="postexample_files/chunks.js"></script><script type="text/javascript" src="postexample_files/chunks_002.js"></script><script type="text/javascript" src="postexample_files/chunks_004.js"></script><script type="text/javascript" src="postexample_files/chunks_003.js"></script><script type="text/javascript" src="postexample_files/spit.js"></script><script type="text/javascript" src="postexample_files/al.htm"></script></body></html>
